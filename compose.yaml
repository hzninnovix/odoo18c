version: '3.1'
services:
    web:
      image: odoo:18.0
      ports:
        - "8069:8069"
      volumes:
        - /home/ubuntu/efs:/var/lib/odoo
#        - odoo-web-data:/var/lib/odoo
        - ./config:/etc/odoo
      environment:
        - DB_HOST=rds-db.cs4cdisa3een.ap-southeast-1.rds.amazonaws.com
        - DB_PORT=5432
        - DB_USER=postgres
        - DB_PASSWORD=InnovixS2024
#      command: >
#        python3 wait-for-psql.py
#        --db_host rds-db.cs4cdisa3een.ap-southeast-1.rds.amazonaws.com
#        --db_port 5432
#        --db_user postgres
#        --db_password InnovixS2024
#      depends_on:
#        - db_healthcheck

#    db_healthcheck:
#      image: postgres:15
#      entrypoint: [ "pg_isready", "-h", "rds-db.cs4cdisa3een.ap-southeast-1.rds.amazonaws.com", "-U", "postgres" ]
#      environment:
#        POSTGRES_PASSWORD: InnovixS2024


volumes:
  odoo-web-data: